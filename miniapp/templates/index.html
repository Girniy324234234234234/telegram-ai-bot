<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<title>Sticker Generator</title>
<style>
body {
  background:#0f0f1a;
  color:white;
  font-family:sans-serif;
  text-align:center;
}
input, button {
  padding:12px;
  margin:10px;
  width:80%;
  border-radius:12px;
  border:none;
}
button {
  background:#7c6cff;
  color:white;
  font-size:18px;
}
img {
  max-width:90%;
  margin-top:20px;
  display:none;
}
</style>
</head>
<body>

<h2>üé® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ç–∏–∫–µ—Ä–∞</h2>

<input id="prompt" placeholder="–ë–æ–±—ë—Ä –≤ –∫–æ—Å–º–æ—Å–µ" />
<button onclick="generate()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å</button>

<p id="status"></p>
<img id="result" />

<script>
async function generate() {
  const text = document.getElementById("prompt").value;
  const status = document.getElementById("status");
  const img = document.getElementById("result");

  if (!text) {
    status.innerText = "–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ";
    return;
  }

  status.innerText = "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...";
  img.style.display = "none";

  try {
    const res = await fetch("/generate", {
      method: "POST",
      headers: {"Content-Type":"application/json"},
      body: JSON.stringify({ text })
    });

    const data = await res.json();

    if (!data.ok) {
      status.innerText = "–û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏";
      return;
    }

    img.src = "data:image/png;base64," + data.image;
    img.style.display = "block";
    status.innerText = "–ì–æ—Ç–æ–≤–æ";

  } catch {
    status.innerText = "–°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω";
  }
}
</script>

</body>
</html>
